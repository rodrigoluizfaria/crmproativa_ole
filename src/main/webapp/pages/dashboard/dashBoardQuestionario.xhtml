<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:comboempresa="http://java.sun.com/jsf/composite/componentes"
                xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">


    <ui:define name="viewname">

        <div class="bcca-breadcrumb">
            <div class="bcca-breadcrumb-item bg-primary-500 hover:bg-primary-700">
                <p:link outcome="/pages/dashboard/dashBoardQuestionario" styleClass="uppercase"
                        style="text-decoration: none">QUESTIONARIO</p:link>
            </div>
            <div class="bcca-breadcrumb-item uppercase">DASHBOARD</div>
        </div>

    </ui:define>

    <ui:define name="content">

        <div class="p-grid justify-center ">

            <p:growl id="grl" widgetVar="grl" globalOnly="true" escape="false" showSummary="false" life="8000"
                     showDetail="true" sticky="false">

                <p:autoUpdate/>

            </p:growl>


            <h:form prependId="false">

                <div class="card">


                    <div class="ui-fluid grid formgrid ">

                        <comboempresa:selectEmpresa id="cmpEmpresa" managedBean="#{dashboradQuestionarioBean}"
                                                    value="#{dashboradQuestionarioBean.empresa}" ajax="true"
                                                    listener="#{dashboradQuestionarioBean.onChangeEmpresa()}"
                                                    update="selectStatusCampanha selectCampanhaPesquisa" filter="true"
                                                    style="md:col-2" exibirSelecione="true"/>

                        <div class="field col-12 md:col-2">

                            <p:outputLabel value="Status Campanha:"/>

                            <p:selectOneMenu id="selectStatusCampanha"
                                             value="#{dashboradQuestionarioBean.idStatusCampanha}" filter="true"
                                             filterMatchMode="contains" autoWidth="false">

                                <f:selectItem itemLabel="Selecione" itemValue=""/>

                                <f:selectItems value="#{dashboradQuestionarioBean.listStatusCampanha}" var="status"
                                               itemLabel="#{status.descricao}" itemValue="#{status.id}"/>

                                <p:ajax global="false" update="selectCampanhaPesquisa"
                                        listener="#{dashboradQuestionarioBean.onChangeStatusCampanha()}"/>

                            </p:selectOneMenu>

                        </div>

                        <div class="field col-12 md:col-2">

                            <p:outputLabel value="Campanha:"/>

                            <p:selectOneMenu id="selectCampanhaPesquisa" value="#{dashboradQuestionarioBean.idCampanha}"
                                             filter="true" filterMatchMode="contains" autoWidth="false"
                                             title="#{dashboradQuestionarioBean.listCampanhas eq null ? 'Selecione o status da campanha' : ''}"
                                             disabled="#{empty dashboradQuestionarioBean.listCampanhas}">

                                <f:selectItem itemLabel="Selecione" noSelectionOption="true"/>

                                <f:selectItems value="#{dashboradQuestionarioBean.listCampanhas}" var="campanha"
                                               itemLabel="#{campanha.descricao}" itemValue="#{campanha.id}"/>

                            </p:selectOneMenu>

                        </div>


                        <div class="field col-12 md:col-2">

                            <p:outputLabel value="FormulÃ¡rio:"/>

                            <p:selectOneMenu id="selectFormulario" value="#{dashboradQuestionarioBean.idQuestionario}"
                                             filter="true" filterMatchMode="contains" autoWidth="false">

                                <f:selectItem itemLabel="Selecione" noSelectionOption="true"/>

                                <f:selectItems value="#{dashboradQuestionarioBean.listQuestionarios}" var="questionario"
                                               itemLabel="#{questionario.descricao}" itemValue="#{questionario.id}"/>

                            </p:selectOneMenu>

                        </div>

                        <div class="field col-12 md:col-2">

                            <p:outputLabel value="Data Inicial" id="lblDataInicial" for="dataInicial"/>

                            <p:datePicker value="#{dashboradQuestionarioBean.dataInicio}" pattern="dd/MM/yyyy"
                                          id="dataInicial" showIcon="true"/>

                        </div>

                        <div class="field col-12 md:col-2">

                            <p:outputLabel value="Data Final" id="lblDataFinal" for="dataFinal"/>

                            <p:datePicker value="#{dashboradQuestionarioBean.dataFim}" pattern="dd/MM/yyyy"
                                          id="dataFinal" showIcon="true"/>

                        </div>

                        <div class="field col-12 md:col-2">

                            <p:outputLabel value="&#160;&#160;"/>

                            <div>

                                <p:commandButton value="Vizualizar" styleClass=" ui-button-raised" icon="pi pi-eye"
                                                 actionListener="#{dashboradQuestionarioBean.pesquisar()}" global="true"
                                                 update="@form"/>
                            </div>


                        </div>

                    </div>

                </div>

                <div class="grid">
                    <ui:repeat var="pie" value="#{dashboradQuestionarioBean.listPieModel}">


                        <div class="col-12 md:col-4">

                            <div class="card  overview-box">


                                <p:pieChart model="#{pie}" style="width: 100%; height: 240px;"/>

                            </div>

                        </div>

                    </ui:repeat>

                </div>
            </h:form>
        </div>
    </ui:define>

</ui:composition>