<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:p="http://primefaces.org/ui">

<h:head>

	<f:facet name="first">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes" />

		  <link rel="shortcut icon" href="#{request.contextPath}/resources/img/favicon.ico" type="image/x-icon" />
            <link rel="icon" href="#{request.contextPath}/resources/img/favicon.ico" type="image/x-icon" />

	</f:facet>


	<title>Proatend</title>

</h:head>

<h:body styleClass="login-body"	style="min-height: auto;">


	<h:form id="formPrincipal" prependId="false">

	<p:growl id="grl" widgetVar="grl" globalOnly="true" escape="false" showSummary="false"  showDetail="true" sticky="true">

			<p:autoUpdate />

		</p:growl>

		<p:remoteCommand id="redirecionar" name="redirecionarLoginSucesso"	immediate="true" action="/pages/home/inicial.xhtml?faces-redirect=true" />
		<p:remoteCommand id="redirecionarConsulta" name="redirecionarConsulta"	immediate="true" action="/pages/atendimento/consultaIntegracao.xhtml?faces-redirect=true" />


		<h:panelGroup id="pngLoginPanel" layout="block"	styleClass="login-panel p-grid">

			<div class="p-col-12 logo-container">


			 <p:graphicImage name="img/logos/logo_login.png"  styleClass="logo" />

			<p:graphicImage name="img/login/icon-login.png"	 styleClass="login-icon" />

				<h2></h2>

			</div>

			<div class="p-col-12">

				<p:outputLabel for="username" value="Usuário" />

				<div class="input-wrapper">

					<p:inputText id="username" placeholder="Usuario" required="true"	value="#{loginBean.strLogin}" requiredMessage="Obrigatório." />

					<i class="pi pi-user" />

				</div>

				<p:message for="username" />

			</div>

			<div class="p-col-12">

				<p:outputLabel for="password" value="Senha" />

				<div class="input-wrapper">

					<p:password id="password" placeholder="senha"	value="#{loginBean.senha}" requiredMessage="Obrigatório."	required="true" feedback="false"  style="width: 100%" />

					<i class="pi pi-lock" />

				</div>
				<p:message for="password" />

				<div>
				<p:selectBooleanCheckbox value="#{loginBean.manterConectado}" id="manterConectado"  /> Manter-me logado
				</div>

			</div>

			<div class="p-col-12 chkbox-container">

			<div class="p-grid">

				<div class="p-col-12" style="padding: 10px 12px;">

<!--
				    <p:selectBooleanCheckbox value="#{loginBean.manterConectado}" id="manterConectado"  /> Manter-me logado
-->
				    <!-- 				   <br/>
						<h:outputLink value="#" onclick="PF('dlgInf').show();">
						                                Resetar senha.
                            </h:outputLink> -->
					</div>

				</div>

			</div>

			<div class="p-col-12 button-container">

				<p:commandButton actionListener="#{loginBean.login()}"	process="@this password username manterConectado" 	update="@form grl dlgAlterarSenha pngLoginPanel" value="Entrar"
					styleClass="blue-btn ui-button-raised"
					onstart="PF('blockUIWidget').block()"
					oncomplete="PF('blockUIWidget').unblock();loginRetorno(xhr, status, args)">


				</p:commandButton>
                <div class="text-right mt-4">
                    <span class="text-300 text-sm">2.35.1-ps</span>
                </div>

			</div>

		</h:panelGroup>

       <pe:blockUI widgetVar="blockUIWidget" target="pngLoginPanel"	id="blockUIWidget" css="{backgroundColor: '#fff'}">

					<h:panelGrid columns="2">

						<i class="pi pi-spin pi-spinner" style="font-size: 2rem" />

						<h:outputText value="Aguarde..." style="white-space: nowrap;" />

					</h:panelGrid>

			</pe:blockUI>
	</h:form>


	<p:dialog header="Info" modal="true" id="dlgInf" widgetVar="dlgInf"	resizable="false" draggable="false">

		<div style="padding: 8px">

			<span style="font-weight: bolder; font-size: 19px">Prezado,</span>
			<p></p>
			<span style="font-weight: bolder; font-size: 19px">Para
				resetar sua senha, solicite o suporte.</span>
			<p></p>
		</div>

	</p:dialog>

	<pe:blockUI target="dlgAlterarSenha" widgetVar="blockUIWidget1" css="{backgroundColor: '#fff'}">

		<h:panelGrid columns="2">

			<h:graphicImage library="img" name="ajax-loader.gif"	style="margin-right: 12px; vertical-align: middle;" />
			<h:outputText value="Aguarde..." style="white-space: nowrap;" />

		</h:panelGrid>

	</pe:blockUI>



	<p:dialog id="dlgAlterarSenha" widgetVar="dlgAlterarSenha"	visible="false" modal="true" resizable="false" width="400"	header="Nova Senha" draggable="false">

		<h:form id="formNovaSenha" prependId="false">

			<h:inputHidden value="#{loginBean.strLogin}" id="loginNovo" />

			<div class="ui-fluid grid formgrid">


				<div class=" field col-12 ">

					<p:outputLabel for="newPsw" value="Nova Senha" id="lblNewPsw" />

					<p:password id="newPsw" placeholder="senha" match="newReptPsw"	validatorMessage="As senhas não correspondem."	value="#{loginBean.novaSenha}" requiredMessage="Obrigatorio." required="true" />

				</div>

				<div class=" field col-12">

					<p:outputLabel for="newReptPsw" value="Confirmar nova Senha"	id="lblReptPsw" />

					<p:password id="newReptPsw" placeholder="senha"	value="#{loginBean.confirmaSenha}" requiredMessage="Obrigatorio."	required="true" />

				</div>

				<div class="col-12">
					<p:messages id="msg" />
				</div>

				<div class="col-12 mt-4">

					<p:commandButton value="Salvar" styleClass="blue-btn ui-button-raised" icon="fa fa-fw fa-save" actionListener="#{loginBean.alterarSenha()}" onstart="PF('blockUIWidget1').block()" update="grl @form"
									 oncomplete="PF('blockUIWidget1').unblock()" />

					<p:spacer width="10" />

					<p:commandButton value="Sair" type="button"	styleClass="blue-btn ui-button-raised" icon="fa fa-fw fa-close" onclick="PF('dlgAlterarSenha').hide();" />

				</div>

			</div>

		</h:form>

	</p:dialog>

</h:body>

	<h:outputStylesheet id="blockUICSS">
	    #blockUIContent td {
	        border: none !important;
	        padding: 0 !important;
	    }
	</h:outputStylesheet>
<!-- 	<h:outputScript name="js/vonix-1.6.min.js" /> -->
	<h:outputScript name="js/script.js" />
	<h:outputStylesheet name="css/primeicons.css" library="rain-layout" />
	<h:outputStylesheet name="css/primeflex.min.css" library="rain-layout" />
	<h:outputStylesheet id="layout-scheme" name="css/layout-blue-light.css" library="rain-layout" />
	<h:outputStylesheet name="login_stylo.css"  />

</html>